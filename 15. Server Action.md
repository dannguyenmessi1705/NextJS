# Server Action trong NextJS
## 1. Giới thiệu
- Đây là phần còn thiếu trong kiên trúc `RSC` giúp chúng trở thành 1 hệ thống `fullstack` hoàn chỉnh.
- Các hàm `async` được chạy độc quyền trên `server` và không bao giờ được gửi đến `client`. Cho phép chúng ta có thể thay đổi dữ liệu trước khi gửi về `client`.
- `Server Action` được tạo ra bởi cú pháp `use server` được đặt ở trên `function` hoặc trên đầu của `file`.
- `Behind the scene`: `NextJS` sẽ tạo ra 1 `API endpoint` (URL). Bất kể khi nào `Server Action` được gọi thì sẽ có 1 `POST request` được gửi đến `API endpoint` đó (các hàm xử lý này không bao giờ được gửi đến `client`).
- Không như `Server Components`, `Server Action` yêu cầu 1 máy chủ web chạy,

## 2. Server Action được định nghĩa ở trên đầu của ?
- 1 hàm `async function` trong 1 `Server Component`. Có thể được sử dụng ngay trong `Server Component` đó hoặc truyền vào `Client Component` dưới dạng `props`. (Đặc biệt, do bình thường không thể truyền `function` qua `Client Component` nên `Server Action` giúp chúng ta làm điều này).
- Đứng độc lập trong 1 file `.js` hoặc `.ts` (được import, gọi từ cả `Client Component` hoặc `Server Component`)


## 3. Server Action được gọi từ đâu ?
- `Server Action` được gọi từ:
    + Thuộc tính `action` của biểu mẫu `<form>` (trên `Server Components` và `Client Components`).
    + Trên các hàm xử lý sự kiện `Event Handler` (chỉ có ở `Client Components`).
    + `useEffect` (chỉ có ở `Client Components`).

## 4. Server Action giúp người dùng như thế nào ?
- Thực hiện việc xử lý, thay đổi dữ liệu (create, update, delete).
- Update lại UI khi có data mới. Bằng cách xác nhận lại `cache` (revalidate) với các `revalidatePath` và `revalidateTag`. (Giống với React khi sử dụng `react-query` hoặc `swr`).
- Làm việc với cookie, session, database, file system, external API, ... (do chạy trên server).


